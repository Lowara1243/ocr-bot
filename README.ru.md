[English](README.md) | [Русский](README.ru.md)
---

# Telegram OCR Бот

Telegram-бот, который использует Tesseract или Yandex Vision для распознавания текста на изображениях.

## Содержание
- [Возможности](#возможности)
- [Быстрый старт (Docker Compose)](#быстрый-старт-docker)
- [Установка из исходного кода](#установка-из-исходного-кода)
- [Конфигурация](#конфигурация)
- [Управление ботом](#управление-ботом)

## Возможности

-   Распознает текст на изображениях, отправленных как фото.
-   **Несколько движков OCR:** Поддерживает локальную обработку через **Tesseract** и облачную через **Yandex Vision**.
-   **Постоянное хранилище:** Использует SQLite для хранения данных пользователей и настроек.
-   **Гибкая система лимитов:** Включает настраиваемые дневные, недельные и месячные лимиты использования.
-   **Готов к развертыванию:** Оптимизирован для простого запуска с помощью Docker Compose / Podman Compose.

## Быстрый старт (Docker)

Это самый быстрый способ запустить бота, если вы не хотите собирать образ из исходного кода.

1.  **Создайте файл `.env`** в новой папке с вашим `BOT_TOKEN` и другими переменными (подробности см. в разделе "Установка и запуск").

2.  **Создайте файл `docker-compose.yml`** в той же папке.

    **Внимание:** В этой версии используется директива `image:` вместо `build: .`. Не забудьте заменить `ВАШ_НИКНЕЙМ` на реальный логин, где размещен образ.

    ```yaml
    version: '3.8'

    services:
      ocr-bot:
        # Используем готовый образ с Docker Hub
        image: lowara1243/ocr-bot:1.0
        container_name: telegram_ocr_bot
        restart: always
        env_file:
          - .env
        volumes:
          - ./database:/app/database
          - ./logs:/app/logs
          - ./temp_images:/app/temp_images
        tty: true
    ```

3.  **Запустите контейнер:**
    ```bash
    docker-compose up -d
    ```
Бот запустится, используя готовый образ из Docker Hub.

## Установка из исходного кода

<details>
<summary>Нажмите, чтобы развернуть инструкцию по ручной установке</summary>

Этот метод подходит для разработки или если вы не хотите использовать Docker.

**1. Клонируйте репозиторий**
```bash
git clone https://github.com/Lowara1243/ocr-bot.git
cd ocr-bot
```

**2. Создайте виртуальное окружение и установите зависимости**

*   **С помощью `uv` (рекомендуется):**
    ```bash
    uv pip install -r requirements.txt
    ```
*   **С помощью `pip`:**
    ```bash
    python -m venv .venv
    source .venv/bin/activate  # Для Windows: .venv\Scripts\activate
    pip install -r requirements.txt
    ```

**3. Настройте переменные окружения**

Скопируйте `.env.example` в `.env` и заполните свои значения, особенно `BOT_TOKEN`.
```bash
cp .env.example .env
```
> Подробное описание всех переменных смотрите в разделе [Конфигурация](#конфигурация).

**4. Запустите бота**
```bash
python main.py
```

</details>

## Конфигурация

Бот настраивается с помощью переменных окружения в файле `.env`.

| Переменная         | Описание                                                             | Обязательно |
|:-------------------|:---------------------------------------------------------------------|:-----------:|
| `BOT_TOKEN`        | Ваш токен для Telegram-бота от [@BotFather](https://t.me/BotFather). |   **Да**    |
| `ADMIN_ID`         | Ваш личный Telegram User ID. Администратор не имеет лимитов.         |     нет     |
| `YANDEX_API_KEY`   | Ваш API-ключ от Yandex Cloud для движка Yandex Vision.               |     Нет     |
| `YANDEX_FOLDER_ID` | ID вашего каталога в Yandex Cloud для движка Yandex Vision.          |     Нет     |
| `DB_FILENAME`      | Имя файла базы данных SQLite. Будет создан в директории `database/`. |     Нет     |
| `LOG_LEVEL`        | Уровень логирования: `INFO`, `DEBUG`, `WARNING`, `ERROR`.            |     Нет     |


## Управление ботом

- **Посмотреть логи:** `docker-compose logs -f`
- **Остановить бота:** `docker-compose down`
- **Перезапустить бота:** `docker-compose restart`